var ktaneModuleCommandInterface={alphabet:{name:"Alphabet",alias:["alphabet"],help:"alphabet <letters>",script:(e,l,t,r)=>{function a(e,l){return e.filter(e=>-1==l.indexOf(e))}for(var i=0;i<r.length;i++)r[i]=ktaneNatoToLetter(r[i]);if(4===r.length)if(4===function(e){return[...new Set(e.split(""))].join("")}(r.join("")).length){var n="JQXZ|QEW|AC|ZNY|TJL|OKBV|DFW|YKQ|LXE|GS|VSI|PQJS|VCN|JR|IRNM|OP|QYDX|HDU|PKD|ARGF".toLowerCase().split("|"),s=[];for(i=0;i<n.length;i++){for(var o="",u=0;u<n[i].length&&a(r,o.split("")).includes(n[i][u]);u++)o+=n[i][u];s.push(o.length)}var h=[];for(i=0;i<n.length;i++)s[i]==Math.max(...s)&&h.push(n[i]);var d=(h=h.sort())[0].split(""),p=a(r,d).sort();for(i=0;i<p.length;i++)d.push(p[i]);ktaneSpeak(`Press letters ${d.map(e=>ktaneLetterToNato(e)).join(" ")}.`)}else ktaneSpeak("I need four distinct letters.");else ktaneSpeak("I need four letters.")}},complicatedwires:{name:"Complicated Wires",vanilla:!0,alias:["complicated wires"],help:"complicated wires <colour>",script:(e,l,t,r)=>{for(var a=[],i=0;i<r.length;i++){if(!["blue","red"].includes(r[i]))return void ktaneSpeak("Invalid colour");a.push(r[i]),["star"].includes(r[i])&&!0,["led"].includes(r[i])&&!0}var n=e=>a.filter(l=>l==e).length,s=(e,l)=>e.split("/").includes(l);if(a.length<=2&&a.length>=1&&n("blue")<=1&&n("red")<=1&&n("white")<=1){var o=1==n("blue")?"1":(n("red"),"1"),u=null;u=s("0000/0001/0101",o)?"cut":s("0011/0110/0111",o)?e.batteries.d+e.batteries.aa>2?"cut":"don't cut":s("1010/1011/1101",o)?e.ports.parallel>=1?"cut":"don't cut":s("0100/1000/1100/1110",o)&&e.serialnumber.numbers[e.serialnumber.numbers.length-1]%2==0?"cut":"don't cut",ktaneSpeak(`${u} the wire`)}else ktaneSpeak("Invalid wire colours")}},keypad:{name:"Keypad",vanilla:!0,alias:["keypad"],help:"keypad <position numbers 1=TL 2=TR 3=BL 4=BR>",script:(e,l,t,r)=>{var a="alpha tango/lightning/copyright/pumpkin/melting three/forward charlie/alien three/black star/railway tracks/alpha echo/november/omega/tennis racket/lambda/kitty/hotel/backward charlie/euro/cursive alpha/empty star/question mark/double kilo/six/paragraph/tango bravo/smiley/candle stick".split("/"),i="13-at/12-squigglyn/1-copyright/8-pumpkin/15-meltedthree/22-rightc/19-dragon/2-filledstar/27-tracks/14-ae/18-nwithhat/6-omega/28-balloon/30-upsidedowny/7-squidknife/9-hookn/23-leftc/16-euro/26-cursive/3-hollowstar/20-questionmark/5-doublek/11-six/21-paragraph/31-bt/4-smileyface/24-pitchfork".split("/"),n=[[12,0,13,1,14,15,16],[17,12,16,18,19,15,20],[2,3,18,21,4,13,19],[22,23,24,14,21,20,25],[26,25,24,5,23,6,7],[22,17,8,9,26,10,11]];if("list"==r[0]){for(var s="",o=0;o<a.length;o++)s+=`<div style="height:64px;width:240px;"><img src="${t}${i[o]}.png" style="vertical-align:middle;"> = ${a[o]}</div>`;l.html('<div style="display:flex;flex-wrap:wrap;">'+s+"</div>")}else{for(var u=r.join(" "),h=0,d=[],o=0;o<a.length;o++)u.includes(a[o])?(d.push(o),h++):"question mark"==a[o]&&u.includes("?")&&(d.push(o),h++);if(4==h){if(!function(e){return[...new Set(e)].length==e.length}(d))return void ktaneSpeak("The symbols must be unique");var p=-1;for(o=0;o<n.length;o++){var c=n[o].includes(d[0]),k=n[o].includes(d[1]),b=n[o].includes(d[2]),g=n[o].includes(d[3]);if(c&&k&&b&&g){p=o;break}}if(-1==p)return void ktaneSpeak("No column found");var f=[];for(o=0;o<n[p].length;o++)n[p][o]==d[0]&&f.push(d[0]),n[p][o]==d[1]&&f.push(d[1]),n[p][o]==d[2]&&f.push(d[2]),n[p][o]==d[3]&&f.push(d[3]);var m=f.map(e=>a[e]).join(" then ");ktaneSpeak(`Press the button in this order: ${m}`)}else ktaneSpeak("No the right amount of symbols")}}},simonsays:{name:"Simon Says",vanilla:!0,alias:["simon","simon says"],help:"simon says <list of colours>",script:(e,l,t,r)=>{for(var a=[],i=0;i<r.length;i++){if(!["blue","red","green","yellow"].includes(r[i]))return void ktaneSpeak("Invalid colour");a.push(r[i])}var n=null;if(0==e.strikes&&/^[aeiou]$/i.test(e.serialnumber.whole)?n={blue:"red",red:"blue",yellow:"green",green:"yellow"}:1==e.strikes&&/^[aeiou]$/i.test(e.serialnumber.whole)?n={blue:"green",red:"yellow",yellow:"red",green:"blue"}:2==e.strikes&&/^[aeiou]$/i.test(e.serialnumber.whole)?n={blue:"red",red:"green",yellow:"blue",green:"yellow"}:0!=e.strikes||/^[aeiou]$/i.test(e.serialnumber.whole)?1!=e.strikes||/^[aeiou]$/i.test(e.serialnumber.whole)?2!=e.strikes||/^[aeiou]$/i.test(e.serialnumber.whole)||(n={blue:"green",red:"yellow",yellow:"red",green:"blue"}):n={blue:"blue",red:"red",yellow:"green",green:"yellow"}:n={blue:"yellow",red:"blue",yellow:"red",green:"green"},null!==n){var s="Press ";for(i=0;i<a.length;i++)s+=n[a[i]]+" ";ktaneSpeak(s)}else ktaneSpeak("Too many strikes")}},thebutton:{name:"The Button",vanilla:!0,alias:["button"],help:"button <colour> <word>",script:(e,l,t,r)=>{if(2===r.length){for(var a="",i="",n=0;n<r.length;n++)["blue","red","white","yellow"].includes(r[n])&&(a=r[n]),["abort","detonate","hold","press"].includes(r[n])&&(i=r[n]);if(""!==a){if(r.includes("strip")){var s="one";return"blue"==a?s="four":"yellow"==a&&(s="five"),void ktaneSpeak(`Release on a ${s}`)}if(""!==i){var o="";o="blue"==a&&"abort"==i?"hold":e.batteries.total>1&&"detonate"==i?"press":"white"==a&&e.indicators.exists("car")?"hold":e.batteries.total>2&&e.indicators.isLit("frk")?"press":"yellow"==a?"hold":"red"==a&&"hold"==i?"press":"hold",ktaneSpeak(`${"hold"==o?"Hold":"Press"} the button`)}}}}},wires:{name:"Wires",vanilla:!0,alias:["wires","simple wires"],help:"wires <list of colours>",script:(e,l,t,r)=>{for(var a=[],i=0;i<r.length;i++){if(!["blue","white","yellow","red","black"].includes(r[i]))return void ktaneSpeak("Invalid colour");a.push(r[i])}if(a.length<3||a.length>6)ktaneSpeak("Invalid number of wires");else{var n=a[a.length-1],s=e=>a.filter(l=>l==e).length,o=e.serialnumber.numbers[e.serialnumber.numbers.length-1],u=null;3==a.length?u=a.includes("red")?"white"==n?"last":s("blue")>1?"last blue":"last":"second":4==a.length?u=s("red")>1&&o%2==1?"last red":"yellow"==n&&0==s("red")?"first":1==s("blue")?"first":s("yellow")>1?"last":"second":5==a.length?u="black"==n&&o%2==1?"fourth":1==s("red")&&s("yellow")>1?"first":0==s("black")?"second":"first":6==a.length&&(u=0==s("yellow")&&o%2==1?"third":1==s("yellow")&&s("white")>1?"fourth":s("red")?"last":"fourth"),null!=u?ktaneSpeak(`Cut the ${u} wire`):ktaneSpeak("Error following rules")}}},thisIsTheLastItemAndItIsNotActuallyNeededButIPutItHereAsAJoke:{name:"",alias:[],script:()=>{}}};